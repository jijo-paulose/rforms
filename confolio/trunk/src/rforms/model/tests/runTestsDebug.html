<html>
  <head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title></title>
  </head>
  <body>
	<script type="text/javascript" src="../../../../lib/dojo/dojo/dojo.js.uncompressed.js"
		djConfig="isDebug: true, debugAtAllCosts: true, parseOnLoad: false, usePlainJson: true"></script>
	<script type="text/javascript">
		dojo.registerModulePath("rforms","../../../src/rforms");
		dojo.registerModulePath("rdfjson","../../../src/rdfjson");
		dojo.require("rforms.model.Engine");
		dojo.require("rforms.model.GroupBinding");
		dojo.require("rforms.model.PropertyGroupBinding");
		dojo.require("rforms.model.ValueBinding");
		dojo.require("rforms.template.ItemStore");
		dojo.require("rdfjson.Graph");
		dojo.require("rdfjson.tests.data");
		dojo.require("rforms.template.tests.data");

		dojo.addOnLoad(function() {
			var doh = {};
			doh.t = function(val) {
				if (!val) {
					alert("doh error");
				}
			};
			doh.f = function(val) {
				if (val) {
					alert("doh error");
				} 
			};
			debugger;

			//Paste code from the tests below (within start and end mark) to be able to debug them,
			//remove any use of doh to allow independent debugging.
			//-------------------------START----------------------------------------

		this.itemStore = new rforms.template.ItemStore();
	this.template = this.itemStore.createTemplate(rforms.template.tests.template1);
	this.graph = new rdfjson.Graph(rdfjson.tests.graph2);
			var binding = rforms.model.match(this.graph, "http://example.org/about", this.template);
		doh.t(binding instanceof rforms.model.GroupBinding);
		doh.t(binding.getChildBindings().length === 5); //A publisher, two titles, a subject and a creator.
		doh.t(binding.getItemGroupedChildBindings()[0].length === 1); //One publisher
		doh.t(binding.getItemGroupedChildBindings()[1].length === 2); //Two titles
		doh.t(binding.getItemGroupedChildBindings()[2].length === 0); //No date
		doh.t(binding.getItemGroupedChildBindings()[3].length === 1); //One subject
		doh.t(binding.getItemGroupedChildBindings()[4].length === 1); //One contributor
			//-------------------------END----------------------------------------
			console.log("A sensless log entry, to be able to step over last code row in firebug above.")
		});
	</script>
  </body>
</html>
